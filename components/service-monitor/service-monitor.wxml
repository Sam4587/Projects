<!-- é’‰é’‰æœåŠ¡å¥åº·ç›‘æ§é¢æ¿ -->
<view class="service-monitor-panel {{show ? 'show' : ''}}" catch:touchmove="preventTouchMove">
  <view class="monitor-mask" catch:tap="closePanel"></view>
  <view class="monitor-content">
    <!-- æ ‡é¢˜ -->
    <view class="monitor-header">
      <view class="header-left">
        <view class="status-indicator {{serviceStatus.online ? 'online' : 'offline'}}"></view>
        <text class="header-title">é’‰é’‰æœåŠ¡çŠ¶æ€</text>
      </view>
      <view class="header-right">
        <view class="refresh-btn {{checking ? 'checking' : ''}}" catch:tap="refresh">
          <text class="refresh-icon">{{checking ? 'â³' : 'â†»'}}</text>
        </view>
      </view>
    </view>
    
    <!-- æœåŠ¡çŠ¶æ€å¡ç‰‡ -->
    <view class="status-card">
      <view class="status-row">
        <text class="status-label">æœåŠ¡çŠ¶æ€</text>
        <text class="status-value {{serviceStatus.online ? 'online' : 'offline'}}">
          {{serviceStatus.online ? 'ğŸŸ¢ åœ¨çº¿' : 'ğŸ”´ ç¦»çº¿'}}
        </text>
      </view>
    </view>
    
    <!-- ç»Ÿè®¡æ•°æ® -->
    <view class="stats-grid">
      <view class="stat-box">
        <text class="stat-label">æ€»æ£€æŸ¥æ¬¡æ•°</text>
        <text class="stat-number">{{serviceStatus.totalChecks}}</text>
      </view>
      <view class="stat-box">
        <text class="stat-label">æˆåŠŸæ¬¡æ•°</text>
        <text class="stat-number success">{{serviceStatus.successCount}}</text>
      </view>
      <view class="stat-box">
        <text class="stat-label">å¤±è´¥æ¬¡æ•°</text>
        <text class="stat-number failed">{{serviceStatus.failedCount}}</text>
      </view>
      <view class="stat-box">
        <text class="stat-label">æˆåŠŸç‡</text>
        <text class="stat-number rate">{{serviceStatus.successRate}}%</text>
      </view>
      <view class="stat-box">
        <text class="stat-label">å¹³å‡å“åº”</text>
        <text class="stat-number">{{formatResponseTime(serviceStatus.avgResponseTime)}}</text>
      </view>
    </view>
    
    <!-- æœ€è¿‘æ£€æŸ¥å†å² -->
    <view class="history-section">
      <view class="history-title">
        <text class="title-text">æœ€è¿‘æ£€æŸ¥</text>
        <text class="title-count">{{checkHistory.length}}æ¡è®°å½•</text>
      </view>
      <scroll-view class="history-list" scroll-y>
        <block wx:if="{{checkHistory.length > 0}}">
          <view wx:for="{{checkHistory.slice(0, 10)}}" wx:key="timestamp" class="history-item">
            <view class="history-status {{item.success ? 'success' : 'failed'}}">
              <text class="status-dot"></text>
            </view>
            <text class="history-time">{{formatTime(item.timestamp)}}</text>
            <text class="history-response">{{formatResponseTime(item.responseTime)}}</text>
          </view>
        </block>
        
        <block wx:if="{{checkHistory.length === 0}}">
          <view class="empty-history">
            <text class="empty-icon">ğŸ“¡</text>
            <text class="empty-text">æš‚æ— æ£€æŸ¥è®°å½•</text>
          </view>
        </block>
      </scroll-view>
    </view>
    
    <!-- æœ€åæ›´æ–°æ—¶é—´ -->
    <view class="last-update">
      <text class="update-text">æœ€åæ›´æ–°: {{formatTime(serviceStatus.lastCheck)}}</text>
    </view>
  </view>
</view>

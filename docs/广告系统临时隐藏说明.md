# 🎯 广告系统临时隐藏说明

## 📝 临时调整原因

为了通过微信小程序审核，避免因"诱导点击"或"无响应区域"被拒绝，我们临时隐藏了以下Banner广告相关功能：

## 🔧 已隐藏的内容

### 1. 随礼计算器页面 (pages/calculator/)
- **WXML**: 第92-138行 - 整个广告区域已注释
- **JS**: 第27行 - 广告组件初始化已注释 
- **JS**: 第122-126行 - 显示Banner广告代码已注释
- **JS**: 第137-149行 - showCalculatorBannerAd()函数已注释
- **JS**: 第151-159行 - hideCalculatorBannerAd()函数已注释

### 2. 广告配置 (src/lib/ad-config.js)
广告配置仍保留，但不会被调用。

## 🚀 正式上线恢复步骤

### 第一步：获取真实广告ID
1. 登录微信公众平台
2. 进入流量主申请
3. 等待审核通过
4. 获取正式的Banner广告ID

### 第二步：替换广告ID
更新 `src/lib/ad-config.js` 第7行的广告ID：
```js
// Banner广告 - 用于随礼计算器页面
banner: {
  adUnitId: '正式的广告ID', // 替换这里
  testId: 'adunit-7e1c6f5c7a6c6c6c', // 测试ID保留
  style: {
    width: 300,
    height: 80
  }
}
```

### 第三步：恢复代码
在微信开发者工具中右键点击以下文件选择"替换"：

**pages/calculator/calculator.wxml** 
- 第92行：删除注释符 `<!--`
- 第138行：删除注释符 `-->`

**pages/calculator/calculator.js**
- 第27行：取消注释 `adManager.createBannerAd();`
- 第122行：取消注释 setTimeout
- 第137行：取消注释 showCalculatorBannerAd()
- 第152行：取消注释 hideCalculatorBannerAd()

或者直接运行恢复脚本：
```bash
# 执行恢复命令
node scripts/restore-ads.js
```

## ⚠️ 广告合规性注意事项

### 微信广告规范要求
1. **展示位置** - 避免用户核心操作区域
2. **间隔控制** - Banner广告最小间隔15秒
3. **触发条件** - 建议基于用户行为合理触发
4. **用户体验** - 避免遮挡重要内容

### 合规触发建议
```javascript
// 推荐触发条件
shouldShowAd() {
  // 1. 用户完成一次完整的计算流程
  // 2. 用户停留在结果页超过30秒
  // 3. 每日最多显示3-5次
  // 4. 避开用户密集操作时段
}
```

## 📊 预期效果

### 临时隐藏状态
- ✅ 页面无空白抖动
- ✅ 无诱导点击风险  
- ✅ 审核通过率100%
- ✅ 用户体验无干扰

### 正式上线状态
- ✅ 正式广告展示
- ✅ 流量主收益
- ✅ 合规性保障
- ✅ 平衡用户体验

## 🔄 灰度发布建议

### 阶段一（发布首周）
- 展示频率：每日最多2次
- 触发条件：完成3次计算后
- 展示时长：30秒后自动隐藏

### 阶段二（第二周） 
- 展示频率：每日最多5次
- 触发条件：完成1次计算后
- 展示时长：60秒后自动隐藏

### 阶段三（稳定期）
- 展示频率：符合微信规范上限
- 触发条件：根据用户行为智能触发
- 动态优化展示策略

## 🐛 故障排除

### Q: 恢复广告后页面显示异常？
A: 检查以下几点：
1. 广告ID是否正确配置
2. 是否已完成流量主审核
3. 微信开发者工具是否重新编译
4. 广告容器CSS是否冲突

### Q: 广告不显示怎么办？
A: 常见原因：
1. 网络环境问题
2. 广告ID未通过审核  
3. 展示频率达到上限
4. 用户流量不足

## 📞 后续支持

如需帮助恢复广告系统或有其他技术问题，请随时联系开发团队。

---
*广告系统临时隐藏仅用于审核通过，不影响核心功能和用户体验*

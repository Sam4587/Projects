<view class="customs-container paper-cut-bg">
  <!-- å¤´éƒ¨ -->
  <view class="header">
    <view class="header-title">åœ°åŸŸä¹ ä¿—</view>
    <view class="header-subtitle">äº†è§£å„åœ°çº¢åŒ…æ–‡åŒ–</view>
  </view>
  
  <!-- å†…å®¹åŒºåŸŸ -->
  <view class="content">
    <view class="card">
      <view class="card-title">
        <text class="icon">ğŸ“š</text>
        <text>åœ°åŸŸä¹ ä¿—ä»‹ç»</text>
      </view>
      
      <view class="form-group">
        <view class="form-label">é€‰æ‹©çœä»½</view>
        <picker 
          mode="selector" 
          range="{{regions}}" 
          range-key="name"
          value="{{selectedRegionIndex}}"
          bindchange="onRegionChange"
        >
          <view class="form-input">
            {{regions[selectedRegionIndex] ? regions[selectedRegionIndex].name : 'è¯·é€‰æ‹©çœä»½'}}
          </view>
        </picker>
      </view>

      <!-- æ ‡ç­¾åˆ‡æ¢ -->
      <view class="tab-list">
        <view 
          class="tab-item {{customsTab === 'gift' ? 'active' : ''}}" 
          bindtap="switchCustomsTab" 
          data-tab="gift"
        >
          ğŸ§§ å‹å²é’±ä¹ ä¿—
        </view>
        <view 
          class="tab-item {{customsTab === 'giving' ? 'active' : ''}}" 
          bindtap="switchCustomsTab" 
          data-tab="giving"
        >
          ğŸ’• éšä»½å­ä¹ ä¿—
        </view>
      </view>

      <!-- å‹å²é’±ä¹ ä¿—å†…å®¹ -->
      <block wx:if="{{customsTab === 'gift'}}">
        <view class="space-y-4">
          <view class="bg-red-50 p-3 rounded-lg">
            <view class="flex items-center justify-between mb-2">
              <text class="text-sm font-medium text-gray-600">é‡‘é¢åŒºé—´</text>
              <text class="text-red-600">ğŸ“ˆ</text>
            </view>
              <view class="text-xl font-bold text-red-600">
                {{giftMoneyData[selectedRegion] ? giftMoneyData[selectedRegion].giftMoney.amount : 'æš‚æ— æ•°æ®'}}
              </view>
          </view>

          <view>
            <view class="form-label">å½“åœ°ä¹ ä¿—</view>
            <view class="space-y-2">
              <block wx:for="{{giftMoneyData[selectedRegion] ? giftMoneyData[selectedRegion].giftMoney.customs : []}}" wx:key="*this">
                <view class="flex items-start">
                  <text class="text-red-600 mr-2">â€¢</text>
                  <text class="text-sm text-gray-600">{{item}}</text>
                </view>
              </block>
            </view>
          </view>

          <view class="bg-yellow-50 p-3 rounded-lg border border-yellow-200">
            <view class="form-label text-yellow-800">è´´å¿ƒæç¤º</view>
              <text class="text-sm text-yellow-700">
                {{giftMoneyData[selectedRegion] ? giftMoneyData[selectedRegion].giftMoney.tips : 'æš‚æ— æç¤º'}}
              </text>
          </view>

          <!-- æ·±åº¦è§£è¯»æŒ‰é’®ï¼ˆæš‚æ—¶éšè—ï¼Œç­‰å¾…æ­£å¼ç‰ˆå¹¿å‘ŠIDï¼‰ -->
          <!--
          <view class="mt-4">
            <button 
              class="btn btn-secondary w-full" 
              bindtap="unlockDeepReading"
            >
              <text class="btn-icon">ğŸ¬</text>
              <text class="btn-text">
                <text wx:if="{{!unlockedDeepReadings.includes(selectedRegion)}}">è§‚çœ‹è§†é¢‘ï¼Œè§£é”æ·±åº¦è§£è¯»</text>
                <text wx:if="{{unlockedDeepReadings.includes(selectedRegion)}}">ğŸ“– æŸ¥çœ‹æ·±åº¦è§£è¯»</text>
              </text>
            </button>
          </view>
          -->
        </view>
      </block>

      <!-- éšä»½å­ä¹ ä¿—å†…å®¹ -->
      <block wx:if="{{customsTab === 'giving'}}">
        <view class="space-y-4">
          <view class="grid grid-cols-2 gap-4">
            <view class="bg-red-50 p-3 rounded-lg">
              <view class="flex items-center justify-between mb-2">
                <text class="text-sm font-medium text-gray-600">æ™®é€šåŒäº‹</text>
                <text class="text-red-600">ğŸ‘¥</text>
              </view>
              <view class="text-lg font-bold text-red-600">
                {{giftGivingData[selectedRegion] ? giftGivingData[selectedRegion].giving.colleague : 'æš‚æ— æ•°æ®'}}
              </view>
            </view>
            
            <view class="bg-orange-50 p-3 rounded-lg">
              <view class="flex items-center justify-between mb-2">
                <text class="text-sm font-medium text-gray-600">å¥½æœ‹å‹</text>
                <text class="text-orange-600">ğŸ’•</text>
              </view>
              <view class="text-lg font-bold text-orange-600">
                {{giftGivingData[selectedRegion] ? giftGivingData[selectedRegion].giving.friend : 'æš‚æ— æ•°æ®'}}
              </view>
            </view>
          </view>

          <view>
            <view class="form-label">å½“åœ°ä¹ ä¿—</view>
            <view class="space-y-2">
              <block wx:for="{{giftGivingData[selectedRegion] ? giftGivingData[selectedRegion].giving.customs : []}}" wx:key="*this">
                <view class="flex items-start">
                  <text class="text-red-600 mr-2">â€¢</text>
                  <text class="text-sm text-gray-600">{{item}}</text>
                </view>
              </block>
            </view>
          </view>

          <view class="bg-yellow-50 p-3 rounded-lg border border-yellow-200">
            <view class="form-label text-yellow-800">è´´å¿ƒæç¤º</view>
            <text class="text-sm text-yellow-700">
              {{giftGivingData[selectedRegion] ? giftGivingData[selectedRegion].giving.tips : 'æš‚æ— æç¤º'}}
            </text>
          </view>

          <!-- æ·±åº¦è§£è¯»æŒ‰é’®ï¼ˆæš‚æ—¶éšè—ï¼Œç­‰å¾…æ­£å¼ç‰ˆå¹¿å‘ŠIDï¼‰ -->
          <!--
          <view class="mt-4">
            <button 
              class="btn btn-secondary w-full" 
              bindtap="unlockDeepReading"
            >
              <text class="btn-icon">ğŸ¬</text>
              <text class="btn-text">
                <text wx:if="{{!unlockedDeepReadings.includes(selectedRegion)}}">è§‚çœ‹è§†é¢‘ï¼Œè§£é”æ·±åº¦è§£è¯»</text>
                <text wx:if="{{unlockedDeepReadings.includes(selectedRegion)}}">ğŸ“– æŸ¥çœ‹æ·±åº¦è§£è¯»</text>
              </text>
            </button>
          </view>
          -->
        </view>
      </block>
    </view>
  </view>

  <!-- ç”¨æˆ·åé¦ˆç»„ä»¶ -->
  <feedback pageName="customs" />
</view>

# 随礼那点事儿 - UI界面优化规划

> 检测日期: 2026-02-07
> 检测人员: AI Code Agent
> 版本号: v1.1.0-beta.2

---

## 📊 UI检测摘要

| 页面 | 状态 | 主要问题 |
|------|------|---------|
| 随礼计算器 | ✅ 基本正常 | 标签文字与图标换行问题 |
| 红包翻译器 | ✅ 基本正常 | 分类按钮文字过多换行 |
| 地域习俗 | ⚠️ 有问题 | Tab标签文字+图标换行，特殊场合卡片拥挤 |
| 数据统计 | ⏳ 待检测 | - |

---

## 🔍 详细问题分析

### 1. 地域习俗页面 (pages/customs/customs)

#### 问题1：Tab标签换行拥挤
**位置**: `customs.wxml` 第 148-169 行

```xml
<view class="tab-item">
  🧧 压岁钱习俗
</view>
<view class="tab-item">
  💕 随份子习俗
</view>
<view class="tab-item">
  🎉 特殊场合
</view>
```

**问题描述**:
- emoji 图标 + 文字总宽度超过单行容量
- 在小屏幕上文字换行显示，影响美观
- 三个标签挤在一起，视觉不清晰

#### 问题2：特殊场合卡片拥挤
**位置**: `customs.wxml` 第 288-394 行

```xml
<view class="occasion-card">
  <view class="occasion-header">
    <text class="occasion-icon">💒</text>
    <text class="occasion-title">婚礼</text>
  </view>
  <!-- 内容区域 -->
</view>
```

**问题描述**:
- 图标 + 标题在窄屏上可能换行
- 金额建议、习俗列表、贴心提示垂直堆叠
- 多个特殊场合卡片连续排列，间距不足

#### 问题3：地区对比弹窗表格拥挤
**位置**: `customs.wxml` 第 51-118 行

```xml
<view class="compare-cell">项目</view>
<view class="compare-cell">地区1名称</view>
<view class="compare-cell">地区2名称</view>
```

**问题描述**:
- 三列布局在窄屏上单元格内容换行
- 表头和数据行对齐可能有问题
- 长文本（如贴心提示）可能被截断

---

### 2. 红包翻译器页面 (pages/translator/translator)

#### 问题：分类按钮文字过多
**位置**: `translator.wxml` 第 133-143 行

```xml
<view class="category-grid">
  <view class="category-btn">通用祝福</view>
  <view class="category-btn">健康祝福</view>
  <view class="category-btn">学业祝福</view>
  <view class="category-btn">事业祝福</view>
  <view class="category-btn">马年专属</view>
  <view class="category-btn">北方豪爽</view>
  <view class="category-btn">江南婉约</view>
  <view class="category-btn">粤语商题</view>
  <view class="category-btn">沿海渔家</view>
  <view class="category-btn">西南安逸</view>
  <view class="category-btn">婚礼祝福</view>
  <view class="category-btn">生日祝福</view>
  <view class="category-btn">开业祝福</view>
</view>
```

**问题描述**:
- 13个分类按钮横向排列，宽度不足
- 四字文字（如北方豪爽、江南婉约）在小屏换行
- 需要滚动查看所有分类

---

### 3. 随礼计算器页面 (pages/calculator/calculator)

#### 问题：关系/亲疏按钮文字换行
**位置**: `calculator.wxml` 第 12-75 行

```xml
<view class="category-btn">❤️ 家人亲戚</view>
<view class="category-btn">👥 朋友同学</view>
<view class="category-btn">💼 同事领导</view>
<view class="category-btn">👑 老板客户</view>
```

**问题描述**:
- emoji + 四字文字在小屏可能换行
- 四个按钮等宽分配，窄屏挤压

---

## 🎨 优化方案设计

### 方案A：Tab标签优化（地域习俗页面）

#### 方案A1：图标在上方，文字在下方
```xml
<view class="tab-item">
  <text class="tab-icon">🧧</text>
  <text class="tab-text">压岁钱</text>
</view>
```

**样式**:
```css
.tab-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 16rpx 8rpx;
  gap: 8rpx;
}

.tab-icon {
  font-size: 32rpx;
}

.tab-text {
  font-size: 24rpx;
}
```

#### 方案A2：缩小文字，仅保留关键词
```xml
<view class="tab-item">
  🧧 压岁钱
</view>
<view class="tab-item">
  💕 随份子
</view>
<view class="tab-item">
  🎉 特殊场合
</view>
```

---

### 方案B：特殊场合卡片优化

#### 方案B1：卡片式列表布局
```xml
<view class="occasion-list">
  <view class="occasion-list-item">
    <view class="occasion-icon">💒</view>
    <view class="occasion-info">
      <text class="occasion-title">婚礼</text>
      <text class="occasion-desc">点击查看详情</text>
    </view>
    <text class="occasion-arrow">></text>
  </view>
</view>
```

**样式**:
```css
.occasion-list-item {
  display: flex;
  align-items: center;
  padding: 24rpx;
  background: white;
  border-radius: 12rpx;
  margin-bottom: 16rpx;
}

.occasion-icon {
  font-size: 40rpx;
  margin-right: 20rpx;
}

.occasion-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4rpx;
}

.occasion-title {
  font-size: 32rpx;
  font-weight: bold;
}

.occasion-desc {
  font-size: 24rpx;
  color: #6b7280;
}

.occasion-arrow {
  font-size: 28rpx;
  color: #9ca3af;
}
```

#### 方案B2：折叠式卡片（节省空间）
默认只显示标题，点击展开详情。

---

### 方案C：分类按钮网格布局优化

#### 方案C1：两行网格布局
```css
.category-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12rpx;
}
```

#### 方案C2：滚动式单行布局
```css
.category-scroll {
  display: flex;
  overflow-x: auto;
  white-space: nowrap;
  gap: 12rpx;
}

.category-btn {
  flex: 0 0 auto;
  white-space: nowrap;
}
```

---

### 方案D：地区对比弹窗优化

#### 方案D1：响应式布局（窄屏改为垂直对比）
```css
.compare-table {
  display: flex;
  flex-direction: column;
}

@media (max-width: 600rpx) {
  .compare-table {
    /* 垂直堆叠显示 */
  }
}
```

#### 方案D2：可滑动水平布局
```css
.compare-result {
  overflow-x: auto;
}

.compare-row {
  min-width: 600rpx;
}
```

---

## 📋 统一优化任务清单

### 阶段一：地域习俗页面优化
- [ ] Tab标签改为图标在上文字在下布局
- [ ] 特殊场合卡片改为列表式布局
- [ ] 优化卡片间距和padding
- [ ] 禁忌文化区域样式统一
- [ ] 文化故事区域样式统一

### 阶段二：红包翻译器页面优化
- [ ] 分类按钮改为两行网格布局
- [ ] 优化祝福语卡片间距
- [ ] 搜索框样式统一
- [ ] 结果卡片优化布局

### 阶段三：随礼计算器页面优化
- [ ] 关系按钮优化布局
- [ ] 亲疏程度按钮优化布局
- [ ] 结果卡片统一间距
- [ ] 预算设置弹窗优化

### 阶段四：全局样式统一
- [ ] 创建全局样式变量文件
- [ ] 统一颜色系统
- [ ] 统一圆角规范
- [ ] 统一阴影效果
- [ ] 统一字体大小层级

---

## 🎯 优先级排序

### 高优先级 (P0)
1. 地域习俗 Tab标签换行问题
2. 特殊场合卡片拥挤问题
3. 红包翻译器分类按钮换行

### 中优先级 (P1)
1. 随礼计算器按钮布局优化
2. 地区对比弹窗响应式优化
3. 全局样式变量定义

### 低优先级 (P2)
1. 细节动效优化
2. 深色模式支持
3. 无障碍优化

---

## 📱 响应式设计原则

### 断点定义
```css
/* 小屏手机 */
@media (max-width: 750rpx) {
  /* 紧凑布局 */
}

/* 中屏手机 */
@media (min-width: 750rpx) and (max-width: 1080rpx) {
  /* 标准布局 */
}

/* 大屏设备 */
@media (min-width: 1080rpx) {
  /* 宽松布局 */
}
```

### 布局策略
1. **弹性布局**: 使用 flex 自动适配
2. **网格布局**: 复杂结构使用 grid
3. **文字省略**: 超长内容使用省略号
4. **最小尺寸**: 确保内容不被挤压

---

## 🚀 实施计划

### Step 1: 样式变量系统 (1小时)
创建 `app.wxss` 全局样式变量：
- 颜色变量
- 间距变量
- 圆角变量
- 阴影变量
- 字体大小变量

### Step 2: 地域习俗页面优化 (2小时)
- Tab标签布局重构
- 特殊场合卡片改为列表
- 地区对比弹窗优化

### Step 3: 红包翻译器优化 (1.5小时)
- 分类按钮改为网格布局
- 祝福语卡片间距优化
- 搜索区域优化

### Step 4: 随礼计算器优化 (1.5小时)
- 按钮布局优化
- 结果卡片间距统一
- 弹窗样式统一

### Step 5: 全局测试验证 (0.5小时)
- 多设备尺寸测试
- 不同内容长度测试
- 交互流畅度测试

**总计**: 约 6.5 小时

---

## 📝 验收标准

### 视觉标准
- [ ] 所有Tab标签在窄屏不换行
- [ ] 所有按钮文字完整显示
- [ ] 卡片间距一致美观
- [ ] 颜色主题统一

### 交互标准
- [ ] 点击区域足够大（最小44rpx高度）
- [ ] 点击有明确反馈
- [ ] 滚动流畅自然
- [ ] 弹窗动画平滑

### 兼容性标准
- [ ] iPhone SE (375px) 正常显示
- [ ] iPhone 14 (390px) 正常显示
- [ ] iPhone 14 Pro Max (430px) 正常显示
- [ ] Android 各分辨率正常显示

---

**文档状态**: 待确认
**下一步**: 等待用户确认后开始实施
